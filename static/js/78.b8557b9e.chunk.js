"use strict";(self.webpackChunktimesheets=self.webpackChunktimesheets||[]).push([[78],{78(e,t,a){a.d(t,{ResetDataTool:()=>d});var s=a(43),i=a(667),n=a(791),r=a(217),c=a(579);const d=()=>{const[e,t]=(0,s.useState)(""),[a,d]=(0,s.useState)(!1),[l,o]=(0,s.useState)("");return(0,c.jsxs)("div",{style:{padding:"2rem",maxWidth:"600px",margin:"0 auto",textAlign:"center"},children:[(0,c.jsx)("h1",{children:"System Reset Tool"}),(0,c.jsx)("p",{style:{color:"red",fontWeight:"bold"},children:"DANGER ZONE: This permanently wipes the database."}),(0,c.jsxs)("div",{style:{margin:"2rem 0"},children:[(0,c.jsx)("input",{type:"password",placeholder:"Enter Admin Password",value:l,onChange:e=>o(e.target.value),style:{padding:"0.5rem",marginRight:"1rem"}}),(0,c.jsx)("button",{onClick:async()=>{if("097756"===l){if(window.confirm("WARNING: This will delete ALL application data (Timesheets, Meetings, Stats). Users will remain but their data will be gone. Continue?")){d(!0),t("Starting cleanup...");try{const e=async e=>{const a=(0,i.rJ)(n.db,...e),s=await(0,i.GG)(a);let r=(0,i.wP)(n.db),c=0,d=0;t("Found ".concat(s.size," documents in ").concat(e[e.length-1],"..."));for(const t of s.docs)r.delete(t.ref),c++,c>=500&&(await r.commit(),d+=c,r=(0,i.wP)(n.db),c=0);c>0&&(await r.commit(),d+=c),t(t=>t+" Deleted ".concat(d," documents from ").concat(e[e.length-1],". "))};await e(["artifacts",r.sZ,"public","data","timesheets"]),await e(["artifacts",r.sZ,"public","data","meeting_attendance"]),await(0,i.kd)((0,i.H9)(n.db,"artifacts",r.sZ,"public","data","stats","aggregate")),t(e=>e+" Stats reset. "),await e(["artifacts",r.sZ,"users"]),t(e=>e+" DONE. All data cleared.")}catch(e){console.error(e),t("Error: ".concat(e.message))}finally{d(!1)}}}else t("Incorrect Password")},disabled:a,style:{padding:"0.5rem 1rem",background:"red",color:"white",border:"none",cursor:"pointer"},children:a?"Clearing...":"NUKE DATABASE"})]}),(0,c.jsx)("div",{style:{marginTop:"2rem",whiteSpace:"pre-wrap",textAlign:"left",background:"#eee",padding:"1rem"},children:e})]})}}}]);
//# sourceMappingURL=78.b8557b9e.chunk.js.map