/*! For license information please see 902.4d217462.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunktimesheets=self.webpackChunktimesheets||[]).push([[902],{11(e,t,a){a.d(t,{V:()=>d});a(43);var s=a(784);const r=(0,s.A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),i=(0,s.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var n=a(217),l=a(579);const d=e=>{let{selectedFounder:t,setSelectedFounder:a,title:s}=e;return(0,l.jsxs)("header",{className:"top-bar",children:[(0,l.jsxs)("div",{className:"page-title",children:[(0,l.jsx)("h1",{children:s}),(0,l.jsx)("span",{className:"date-display",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,l.jsxs)("div",{className:"founder-selector-container",children:[(0,l.jsx)(r,{size:18,style:{color:"var(--text-muted)",marginRight:"0.5rem"}}),(0,l.jsx)("select",{value:t,onChange:e=>a(e.target.value),className:"founder-select",children:n.$h.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsx)(i,{size:14,style:{marginLeft:"0.5rem",opacity:.5}})]})]})}},21(e,t,a){a.d(t,{Ek:()=>o,J3:()=>m,LF:()=>c,vD:()=>u});var s=a(555),r=a(43),i=a(667),n=a(791),l=a(217);const d=()=>(0,i.rJ)(n.db,"artifacts",l.sZ,"public","data",l.LL),o=(e,t)=>{const[a,n]=(0,r.useState)(null),[l,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!e)return n(null),void o(!1);const a=(0,i.P)(d(),(0,i._M)("founder","==",t),(0,i._M)("endTime","==",null),(0,i.AB)(1)),r=(0,i.aQ)(a,e=>{let t=null;if(!e.empty){var a;const r=e.docs[0];t=(0,s.A)((0,s.A)({id:r.id},r.data()),{},{startTime:null===(a=r.data().startTime)||void 0===a?void 0:a.toDate()})}n(t),o(!1)},e=>{console.error("Active entry error:",e),o(!1)});return()=>r()},[e,t]),{activeEntry:a,loading:l}},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[a,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!e)return n([]),void o(!1);const a=(0,i.P)(d(),(0,i.My)("startTime","desc"),(0,i.AB)(t)),r=(0,i.aQ)(a,e=>{const t=e.docs.map(e=>{var t,a;return(0,s.A)((0,s.A)({id:e.id},e.data({serverTimestamps:"estimate"})),{},{startTime:null===(t=e.data({serverTimestamps:"estimate"}).startTime)||void 0===t?void 0:t.toDate(),endTime:null===(a=e.data({serverTimestamps:"estimate"}).endTime)||void 0===a?void 0:a.toDate()})});n(t),o(!1)},e=>{console.error("Recent entries error:",e),o(!1)});return()=>r()},[e,t]),{entries:a,loading:l}},m=e=>{const[t,a]=(0,r.useState)({monthTotal:0,yearTotal:0,founderStats:{},activeCount:0}),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!e)return void o(!1);const t=(0,i.H9)(n.db,"artifacts",l.sZ,"public","data","stats","aggregate"),s=(0,i.aQ)(t,async e=>{if(e.exists())a(e.data()),o(!1);else{console.log("Stats document missing. performing one-time migration...");const e=new Date,s=new Date(e.getFullYear(),e.getMonth(),1).getTime(),r=(0,i.P)(d()),n=await(0,i.GG)(r);let l=0,c=0,m=0;const u={};n.docs.forEach(e=>{var t,a;const r=e.data(),i=r.founder;if(!i)return;if(u[i]||(u[i]={month:0,year:0}),!r.endTime)return void m++;const n=null!==(t=r.startTime)&&void 0!==t&&t.seconds?1e3*r.startTime.seconds:0,d=(null!==(a=r.endTime)&&void 0!==a&&a.seconds?1e3*r.endTime.seconds:0)-n;c+=d,u[i].year+=d,n>=s&&(l+=d,u[i].month+=d)});const h={monthTotal:l,yearTotal:c,founderStats:u,activeCount:m};await(0,i.BN)(t,h),a(h),o(!1)}},e=>{console.error("Stats snapshot error:",e),o(!1)});return()=>s()},[e]),{stats:t,loading:s}},u=e=>{const[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[o,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(!e)return a([]),void l(!1);const t=(0,i.P)(d(),(0,i.My)("startTime","desc"),(0,i.AB)(50));(0,i.GG)(t).then(e=>{const t=e.docs.map(e=>{var t,a;return(0,s.A)((0,s.A)({id:e.id},e.data({serverTimestamps:"estimate"})),{},{startTime:null===(t=e.data({serverTimestamps:"estimate"}).startTime)||void 0===t?void 0:t.toDate(),endTime:null===(a=e.data({serverTimestamps:"estimate"}).endTime)||void 0===a?void 0:a.toDate()})});a(t),l(!1),50===t.length&&c(!0)}).catch(e=>{console.error("Timesheets getDocs error:",e),l(!1)});const r=(0,i.P)(d(),(0,i.My)("startTime","desc"),(0,i.AB)(100)),n=(0,i.aQ)(r,e=>{const t=e.docs.map(e=>{var t,a;return(0,s.A)((0,s.A)({id:e.id},e.data({serverTimestamps:"estimate"})),{},{startTime:null===(t=e.data({serverTimestamps:"estimate"}).startTime)||void 0===t?void 0:t.toDate(),endTime:null===(a=e.data({serverTimestamps:"estimate"}).endTime)||void 0===a?void 0:a.toDate()})});a(t),c(!1)});return()=>n()},[e]),{entries:t,loading:n,loadingMore:o}}},829(e,t,a){a.d(t,{IM:()=>i,Yq:()=>r,a3:()=>s});const s=e=>{if(!e&&0!==e)return"0h 0m";const t=Math.floor(e/6e4);if(0===t)return"< 1m";const a=Math.floor(t/60),s=t%60;return"".concat(a,"h ").concat(s,"m")},r=e=>e?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(e):"",i=e=>e?e.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase():"?"},855(e,t,a){a.d(t,{A:()=>s});const s=(0,a(784).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},902(e,t,a){a.d(t,{Dashboard:()=>N});var s=a(43),r=a(667),i=a(791),n=a(21),l=a(11),d=a(88),o=a(784);const c=(0,o.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),m=(0,o.A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var u=a(829),h=a(217),g=a(579);const p=(0,s.memo)(e=>{let{stats:t,loading:a}=e;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"stat-card card animate-enter delay-100",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"stat-icon-wrapper blue",children:(0,g.jsx)(d.A,{size:24})}),(0,g.jsx)("div",{className:"stat-label",children:"Total Hours (Month)"}),(0,g.jsx)("div",{className:"stat-value",children:a&&!t.monthTotal?(0,g.jsx)("span",{className:"skeleton-text",style:{width:"80px",display:"inline-block"}}):(0,u.a3)(t.monthTotal)})]})}),(0,g.jsx)("div",{className:"stat-card card animate-enter delay-200",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"stat-icon-wrapper green",children:(0,g.jsx)(c,{size:24})}),(0,g.jsx)("div",{className:"stat-label",children:"Total Hours (Year)"}),(0,g.jsx)("div",{className:"stat-value",children:a&&!t.yearTotal?(0,g.jsx)("span",{className:"skeleton-text",style:{width:"80px",display:"inline-block"}}):(0,u.a3)(t.yearTotal)})]})}),(0,g.jsx)("div",{className:"stat-card card animate-enter delay-300",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"stat-icon-wrapper purple",children:(0,g.jsx)(m,{size:24})}),(0,g.jsx)("div",{className:"stat-label",children:"Active Sessions"}),(0,g.jsx)("div",{className:"stat-value",children:a&&0===t.activeCount&&!localStorage.getItem("dashboard_stats_cache")?(0,g.jsx)("span",{className:"skeleton-text",style:{width:"40px",display:"inline-block"}}):t.activeCount})]})}),(0,g.jsxs)("div",{className:"breakdown-card card animate-enter delay-400",children:[(0,g.jsx)("h3",{style:{fontSize:"1rem",fontWeight:600,margin:"0 0 1rem 0"},children:"Yearly Breakdown"}),(0,g.jsx)("div",{className:"breakdown-list",children:h.$h.map(e=>{var s,r;return(0,g.jsxs)("div",{className:"breakdown-item",children:[(0,g.jsx)("span",{style:{fontSize:"0.85rem",fontWeight:500},children:(0,u.IM)(e)}),(0,g.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:700,color:"var(--primary)"},children:!a||null!==(s=t.founderStats[e])&&void 0!==s&&s.year?(0,u.a3)((null===(r=t.founderStats[e])||void 0===r?void 0:r.year)||0):"-"})]},e)})})]})]})}),x=(0,o.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),y=(0,o.A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),v=(0,o.A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),f=(0,s.memo)(e=>{var t;let{activeEntry:a,activeLoading:r,onClockIn:i,onClockOut:n,onManualSubmit:l}=e;const[d,o]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[u,h]=(0,s.useState)(!1),[p,f]=(0,s.useState)((new Date).toISOString().split("T")[0]),[j,b]=(0,s.useState)("09:00"),[T,S]=(0,s.useState)("17:00"),[k,w]=(0,s.useState)(""),[N,A]=(0,s.useState)("");return(0,g.jsx)("div",{className:"timer-section card animate-slide-up delay-200",children:(0,g.jsxs)("div",{style:{padding:"2rem"},children:[(0,g.jsxs)("div",{className:"timer-header",children:[(0,g.jsx)("h2",{style:{margin:0,fontSize:"1.25rem"},children:u?"Log Past Work":"Current Session"}),(0,g.jsx)("button",{onClick:()=>h(!u),className:"mode-switch-btn",children:u?"Switch to Timer":"Switch to Manual Entry"})]}),u?(0,g.jsxs)("form",{onSubmit:e=>{e.preventDefault();l("Others"===k?N:k,p,j,T),h(!1),w(""),A("")},style:{display:"grid",gap:"1.5rem"},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"input-label",children:"Task Description"}),(0,g.jsx)("input",{type:"text",list:"task-suggestions",value:k,onChange:e=>w(e.target.value),placeholder:"e.g., Q3 Financial Review",className:"task-input"}),"Others"===k&&(0,g.jsx)("input",{type:"text",value:N,onChange:e=>A(e.target.value),placeholder:"Specify task...",className:"task-input",style:{marginTop:"0.5rem"},autoFocus:!0})]}),(0,g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"input-label",children:"Date"}),(0,g.jsx)("input",{type:"date",value:p,onChange:e=>f(e.target.value),className:"custom-input"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"input-label",children:"Start"}),(0,g.jsx)("input",{type:"time",value:j,onChange:e=>b(e.target.value),className:"custom-input"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"input-label",children:"End"}),(0,g.jsx)("input",{type:"time",value:T,onChange:e=>S(e.target.value),className:"custom-input"})]})]}),(0,g.jsxs)("button",{type:"submit",className:"action-btn btn-primary",children:[(0,g.jsx)(x,{size:20})," Log Entry"]})]}):(0,g.jsxs)("div",{className:"timer-controls",children:[(0,g.jsx)("div",{style:{flex:1},children:a?(0,g.jsxs)("div",{className:"active-session-card",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{style:{fontSize:"0.8rem",textTransform:"uppercase",color:"var(--primary)",fontWeight:700,marginBottom:"0.25rem"},children:"Active Task"}),(0,g.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:600},children:a.task}),(0,g.jsxs)("div",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:["Started at ",null===(t=a.startTime)||void 0===t?void 0:t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,g.jsx)("div",{className:"btn-pulse",style:{width:"12px",height:"12px",background:"#10b981",borderRadius:"50%"}})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("input",{type:"text",list:"task-suggestions",value:d,onChange:e=>o(e.target.value),placeholder:"What are you working on?",className:"task-input"}),"Others"===d&&(0,g.jsx)("input",{type:"text",value:c,onChange:e=>m(e.target.value),placeholder:"Specify task...",className:"task-input",style:{marginTop:"0.75rem"},autoFocus:!0})]})}),a?(0,g.jsxs)("button",{onClick:n,className:"action-btn btn-danger",children:[(0,g.jsx)(y,{size:20,fill:"currentColor"})," Stop"]}):(0,g.jsxs)("button",{onClick:()=>{i("Others"===d?c:d),o(""),m("")},disabled:r&&!a&&!1,className:"action-btn btn-primary",children:[(0,g.jsx)(v,{size:20,fill:"currentColor"})," Start"]})]})]})})});var j=a(978),b=a(855);const T=(0,s.memo)(e=>{let{entries:t,loading:a,onDelete:s}=e;return(0,g.jsxs)("div",{className:"card history-section animate-slide-up delay-300",children:[(0,g.jsxs)("h3",{style:{fontSize:"1.1rem",margin:"0 0 1.5rem 0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,g.jsx)(j.A,{size:20})," Recent Activity (Last 10)"]}),0===t.length?(0,g.jsx)("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:a?"Checking history...":"No activities recorded yet."}):(0,g.jsx)("ul",{className:"history-list",children:t.map(e=>{const t=e.endTime?(0,u.a3)(e.endTime-e.startTime):"Active",a=(0,u.IM)(e.founder),r=["#4361ee","#7209b7","#f72585","#4cc9f0"][h.$h.indexOf(e.founder)%4];return(0,g.jsxs)("li",{className:"history-item",children:[(0,g.jsx)("div",{className:"history-avatar",style:{background:"".concat(r,"20"),color:r},children:a}),(0,g.jsxs)("div",{className:"history-content",children:[(0,g.jsx)("div",{className:"history-task",children:e.task}),(0,g.jsxs)("div",{className:"history-meta",children:[(0,g.jsx)("span",{children:e.founder}),(0,g.jsx)("span",{children:"\u2022"}),(0,g.jsx)("span",{children:(0,u.Yq)(e.startTime)}),(0,g.jsx)("span",{children:"\u2022"}),(0,g.jsxs)("span",{children:[e.startTime&&e.startTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ",e.endTime?e.endTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Now"]})]})]}),(0,g.jsx)("span",{className:"history-duration",style:e.endTime?{}:{color:"#10b981",background:"#d1fae5"},children:t}),(0,g.jsx)("button",{onClick:()=>s(e.id),className:"history-delete-btn",title:"Delete",children:(0,g.jsx)(b.A,{size:16})})]},e.id)})})]})});var S=a(555);const k=()=>h.$h.reduce((e,t)=>(0,S.A)((0,S.A)({},e),{},{[t]:!1}),{}),w=s.memo(()=>{const[e,t]=(0,s.useState)((new Date).toISOString().split("T")[0]),[a,n]=(0,s.useState)(k()),[l,d]=(0,s.useState)(k()),[o,c]=(0,s.useState)(!0),[m,u]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[f,j]=(0,s.useState)({founderStats:{},yearlyTotal:0,totalMeetings:0}),b=(0,s.useRef)(new Set);(0,s.useEffect)(()=>{let t=!1;u(!0),v(!1);return(async()=>{try{const a=(0,r.H9)(i.db,"artifacts",h.sZ,"public","data","meeting_attendance",e),s=await(0,r.x7)(a);if(t)return;if(s.exists()){const t=s.data().attendance||{},a=(0,S.A)((0,S.A)({},k()),t);n(a),d(a),c(!1),b.current.add(e)}else{const e=k();n(e),d(e),c(!0)}}catch(a){console.error("Error fetching attendance:",a)}finally{t||u(!1)}})(),()=>{t=!0}},[e]),(0,s.useEffect)(()=>{const e=(0,r.H9)(i.db,"artifacts",h.sZ,"public","data","stats","aggregate"),t=(0,r.aQ)(e,async t=>{if(t.exists()){const a=t.data();if(a.meetingStats)j(a.meetingStats);else{console.log("Meeting stats missing. Migrating...");const t=(0,r.P)((0,r.rJ)(i.db,"artifacts",h.sZ,"public","data","meeting_attendance")),a=await(0,r.GG)(t),s=h.$h.reduce((e,t)=>(0,S.A)((0,S.A)({},e),{},{[t]:0}),{});let n=0,l=0;const d=(new Date).getFullYear();a.forEach(e=>{const t=e.data();l++;new Date(t.date).getFullYear()===d&&n++,t.attendance&&Object.entries(t.attendance).forEach(e=>{let[t,a]=e;a&&s[t]++})});const o={founderStats:s,yearlyTotal:n,totalMeetings:l};await(0,r.BN)(e,{meetingStats:o},{merge:!0}),j(o)}}});return()=>t()},[]);return(0,g.jsxs)("div",{className:"card meeting-attendance-card",style:{gridColumn:"span 12"},children:[(0,g.jsxs)("div",{className:"timer-header",children:[(0,g.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:700,margin:0},children:"Founders Weekly Meeting"}),(0,g.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[(0,g.jsx)("label",{className:"date-display",children:"Select Date:"}),(0,g.jsx)("input",{type:"date",value:e,onChange:e=>t(e.target.value),className:"custom-input",style:{padding:"0.5rem",width:"auto"}})]})]}),(0,g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem",marginTop:"1.5rem"},children:[(0,g.jsxs)("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"12px"},children:[(0,g.jsxs)("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:["Mark Attendance",o&&!m&&(0,g.jsx)("span",{style:{marginLeft:"0.5rem",fontSize:"0.75rem",color:"#f59e0b",fontWeight:400},children:"(New Meeting)"})]}),m?(0,g.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--text-muted)"},children:"Loading attendance..."}):(0,g.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:h.$h.map(e=>(0,g.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"1rem",cursor:"pointer",padding:"0.75rem",background:a[e]?"rgba(16, 185, 129, 0.1)":"white",borderRadius:"8px",border:a[e]?"1px solid #10b981":"1px solid var(--border-color)",transition:"all 0.2s ease"},children:[(0,g.jsx)("input",{type:"checkbox",checked:a[e]||!1,onChange:()=>(e=>{n(t=>(0,S.A)((0,S.A)({},t),{},{[e]:!t[e]}))})(e),style:{width:"1.2rem",height:"1.2rem",accentColor:"#10b981"}}),(0,g.jsx)("span",{style:{fontWeight:500},children:e})]},e))}),(0,g.jsx)("div",{style:{marginTop:"1.5rem"},children:(0,g.jsx)("button",{onClick:async()=>{x(!0),v(!1);try{const t=(0,r.H9)(i.db,"artifacts",h.sZ,"public","data","stats","aggregate"),s=(new Date).getFullYear(),n=new Date(e).getFullYear()===s,m={};o&&(m["meetingStats.totalMeetings"]=(0,r.GV)(1),n&&(m["meetingStats.yearlyTotal"]=(0,r.GV)(1))),h.$h.forEach(e=>{const t=!o&&(l[e]||!1),s=a[e]||!1;s&&!t?m["meetingStats.founderStats.".concat(e)]=(0,r.GV)(1):!s&&t&&(m["meetingStats.founderStats.".concat(e)]=(0,r.GV)(-1))}),await Promise.all([(0,r.BN)((0,r.H9)(i.db,"artifacts",h.sZ,"public","data","meeting_attendance",e),{date:e,attendance:a,updatedAt:(new Date).toISOString()},{merge:!0}),Object.keys(m).length>0?(0,r.BN)(t,m,{merge:!0}):Promise.resolve()]),d((0,S.A)({},a)),c(!1),b.current.add(e),v(!0),setTimeout(()=>v(!1),3e3)}catch(t){console.error("Error saving attendance:",t),alert("Failed to save attendance. Please try again.")}finally{x(!1)}},disabled:p||m,style:{width:"100%",padding:"1rem",borderRadius:"12px",border:"none",fontWeight:700,fontSize:"1rem",cursor:p||m?"not-allowed":"pointer",background:y?"#10b981":p?"#6b7280":"var(--primary)",color:"white",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:p?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("span",{style:{width:"16px",height:"16px",border:"2px solid white",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),"Saving..."]}):y?(0,g.jsx)(g.Fragment,{children:"\u2713 Saved!"}):"Save Attendance"})})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1rem",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Attendance Overview"}),(0,g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[(0,g.jsxs)("div",{style:{background:"rgba(67, 97, 238, 0.05)",padding:"1rem",borderRadius:"12px"},children:[(0,g.jsx)("div",{style:{fontSize:"0.8rem",color:"var(--primary)",fontWeight:600},children:"Total Meetings (Year)"}),(0,g.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"var(--text-main)"},children:f.yearlyTotal})]}),(0,g.jsxs)("div",{style:{background:"rgba(16, 185, 129, 0.05)",padding:"1rem",borderRadius:"12px"},children:[(0,g.jsx)("div",{style:{fontSize:"0.8rem",color:"#10b981",fontWeight:600},children:"Total Meetings (All Time)"}),(0,g.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:700,color:"var(--text-main)"},children:f.totalMeetings})]})]}),(0,g.jsx)("div",{style:{background:"white",border:"1px solid var(--border-color)",borderRadius:"12px",overflow:"hidden"},children:(0,g.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{style:{background:"#f8f9fa",borderBottom:"1px solid var(--border-color)"},children:[(0,g.jsx)("th",{style:{padding:"0.75rem 1rem",textAlign:"left",fontSize:"0.85rem",color:"var(--text-muted)"},children:"Founder"}),(0,g.jsx)("th",{style:{padding:"0.75rem 1rem",textAlign:"right",fontSize:"0.85rem",color:"var(--text-muted)"},children:"Attended"}),(0,g.jsx)("th",{style:{padding:"0.75rem 1rem",textAlign:"right",fontSize:"0.85rem",color:"var(--text-muted)"},children:"Rate"})]})}),(0,g.jsx)("tbody",{children:h.$h.map((e,t)=>{const a=f.founderStats[e]||0,s=f.totalMeetings||1,r=Math.round(a/s*100);return(0,g.jsxs)("tr",{style:{borderBottom:t===h.$h.length-1?"none":"1px solid var(--border-color)"},children:[(0,g.jsx)("td",{style:{padding:"0.75rem 1rem",fontWeight:500},children:e}),(0,g.jsx)("td",{style:{padding:"0.75rem 1rem",textAlign:"right",fontWeight:600},children:a}),(0,g.jsx)("td",{style:{padding:"0.75rem 1rem",textAlign:"right"},children:(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"0.5rem"},children:[(0,g.jsxs)("span",{style:{fontSize:"0.85rem",color:"var(--text-muted)"},children:[r,"%"]}),(0,g.jsx)("div",{style:{width:"40px",height:"4px",background:"#e9ecef",borderRadius:"2px",overflow:"hidden"},children:(0,g.jsx)("div",{style:{width:"".concat(r,"%"),height:"100%",background:"var(--primary)"}})})]})})]},e)})})]})})]})]}),(0,g.jsx)("style",{children:"\n                @keyframes spin {\n                    to { transform: rotate(360deg); }\n                }\n            "})]})}),N=e=>{let{user:t}=e;const[a,d]=(0,s.useState)(h.$h[0]),{activeEntry:o,loading:c}=(0,n.Ek)(t,a),{entries:m,loading:u}=(0,n.LF)(t,10),{stats:x,loading:y}=(0,n.J3)(t),v=async(e,t,a)=>{try{const s=(0,r.H9)(i.db,"artifacts",h.sZ,"public","data","stats","aggregate"),n=new Date,l=a||n,d=l.getMonth()===n.getMonth()&&l.getFullYear()===n.getFullYear(),o=l.getFullYear()===n.getFullYear(),c={["founderStats.".concat(e,".year")]:(0,r.GV)(t)};o&&(c.yearTotal=(0,r.GV)(t)),d&&(c.monthTotal=(0,r.GV)(t),c["founderStats.".concat(e,".month")]=(0,r.GV)(t)),await(0,r.BN)(s,c,{merge:!0})}catch(s){console.error("Failed to update stats:",s)}},j=(0,s.useCallback)(async e=>{if(t&&e.trim())try{await(0,r.gS)((0,r.rJ)(i.db,"artifacts",h.sZ,"public","data",h.LL),{founder:a,task:e,startTime:(0,r.O5)(),endTime:null,status:"active"})}catch(s){console.error("Error clocking in:",s)}},[t,a]),b=(0,s.useCallback)(async()=>{if(t&&o)try{const e=new Date,t=o.startTime,a=e.getTime()-t.getTime(),s=(0,r.H9)(i.db,"artifacts",h.sZ,"public","data",h.LL,o.id);await(0,r.mZ)(s,{endTime:r.Dc.fromDate(e),status:"completed"}),await v(o.founder,a,e)}catch(e){console.error("Error clocking out:",e)}},[t,o]),S=(0,s.useCallback)(async(e,s,n,l)=>{if(!t||!e.trim())return;const d=new Date("".concat(s,"T").concat(n)),o=new Date("".concat(s,"T").concat(l));if(o<=d)return void alert("End time must be after start time");const c=o.getTime()-d.getTime();try{await(0,r.gS)((0,r.rJ)(i.db,"artifacts",h.sZ,"public","data",h.LL),{founder:a,task:e,startTime:r.Dc.fromDate(d),endTime:r.Dc.fromDate(o),status:"manual"}),await v(a,c,d)}catch(m){console.error("Error adding manual entry:",m)}},[t,a]),k=(0,s.useCallback)(async e=>{if(window.confirm("Are you sure you want to delete this entry?"))try{const t=(0,r.H9)(i.db,"artifacts",h.sZ,"public","data",h.LL,e),a=await(0,r.x7)(t);if(a.exists()){const e=a.data();if(e.endTime&&e.startTime){const t=e.startTime.toDate?e.startTime.toDate():new Date(e.startTime),a=(e.endTime.toDate?e.endTime.toDate():new Date(e.endTime)).getTime()-t.getTime();await v(e.founder,-a,t)}}await(0,r.kd)(t)}catch(t){console.error("Error deleting:",t)}},[]);return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("datalist",{id:"task-suggestions",children:h.Ct.map(e=>(0,g.jsx)("option",{value:e},e))}),(0,g.jsx)(l.V,{selectedFounder:a,setSelectedFounder:d,title:"Timesheet Dashboard"}),(0,g.jsxs)("div",{className:"dashboard-grid",children:[(0,g.jsx)(p,{stats:x,loading:y}),(0,g.jsx)(f,{activeEntry:o,activeLoading:c,onClockIn:j,onClockOut:b,onManualSubmit:S}),(0,g.jsx)(w,{}),(0,g.jsx)(T,{entries:m,loading:u,onDelete:k})]})]})}}}]);
//# sourceMappingURL=902.4d217462.chunk.js.map