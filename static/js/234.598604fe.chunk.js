/*! For license information please see 234.598604fe.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunktimesheets=self.webpackChunktimesheets||[]).push([[234],{11(e,t,a){a.d(t,{V:()=>l});a(43);var s=a(784);const r=(0,s.A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),n=(0,s.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var i=a(579);const l=e=>{let{selectedFounder:t,setSelectedFounder:a,title:s,foundersList:l=[]}=e;const o=s.startsWith("Welcome")?"".concat((()=>{const e=(new Date).getHours();return e<12?"Good morning":e<18?"Good afternoon":"Good evening"})(),", ").concat(s.replace("Welcome, ","")):s;return(0,i.jsxs)("header",{className:"top-bar",children:[(0,i.jsxs)("div",{className:"page-title",children:[(0,i.jsx)("h1",{children:o}),(0,i.jsx)("span",{className:"date-display",children:(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),a&&(0,i.jsxs)("div",{className:"founder-selector-container",children:[(0,i.jsx)(r,{size:18,style:{color:"var(--text-muted)",marginRight:"0.5rem"}}),(0,i.jsxs)("select",{value:t,onChange:e=>a(e.target.value),className:"founder-select",children:[l.map(e=>(0,i.jsx)("option",{value:e,children:e},e)),0===l.length&&(0,i.jsx)("option",{children:t})]}),(0,i.jsx)(n,{size:14,style:{marginLeft:"0.5rem",opacity:.5}})]})]})}},21(e,t,a){a.d(t,{Ek:()=>d,J3:()=>m,LF:()=>c,vD:()=>u});var s=a(555),r=a(43),n=a(667),i=a(791),l=a(217);const o=()=>(0,n.rJ)(i.db,"artifacts",l.sZ,"public","data",l.LL),d=(e,t)=>{const[a,i]=(0,r.useState)(null),[l,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!e)return i(null),void d(!1);const a=setTimeout(()=>{d(!1)},3e3),r=(0,n.P)(o(),(0,n._M)("founder","==",t),(0,n._M)("endTime","==",null),(0,n.AB)(1)),l=(0,n.aQ)(r,e=>{clearTimeout(a);let t=null;if(!e.empty){var r;const a=e.docs[0];t=(0,s.A)((0,s.A)({id:a.id},a.data()),{},{startTime:null===(r=a.data().startTime)||void 0===r?void 0:r.toDate()})}i(t),d(!1)},e=>{console.error("Active entry error:",e),"failed-precondition"===e.code&&console.error("\ud83d\udd25 MISSING INDEX: Open this link to fix ->",e.message),d(!1)});return()=>{l(),clearTimeout(a)}},[e,t]),{activeEntry:a,loading:l}},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[a,i]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!e)return i([]),void d(!1);const a=setTimeout(()=>{d(!1)},3e3),r=(0,n.P)(o(),(0,n.My)("startTime","desc"),(0,n.AB)(t)),l=(0,n.aQ)(r,e=>{clearTimeout(a);const t=e.docs.map(e=>{var t,a;return(0,s.A)((0,s.A)({id:e.id},e.data({serverTimestamps:"estimate"})),{},{startTime:null===(t=e.data({serverTimestamps:"estimate"}).startTime)||void 0===t?void 0:t.toDate(),endTime:null===(a=e.data({serverTimestamps:"estimate"}).endTime)||void 0===a?void 0:a.toDate()})});i(t),d(!1)},e=>{console.error("Recent entries error:",e),"failed-precondition"===e.code&&console.warn("\ud83d\udd25 MISSING INDEX for Recent Entries. Check console for link."),d(!1)});return()=>{l(),clearTimeout(a)}},[e,t]),{entries:a,loading:l}},m=e=>{const[t,a]=(0,r.useState)({monthTotal:0,yearTotal:0,founderStats:{},activeCount:0}),[s,o]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!e)return void o(!1);const t=setTimeout(()=>{o(!1)},3e3),s=(0,n.H9)(i.db,"artifacts",l.sZ,"public","data","stats","aggregate"),r=(0,n.aQ)(s,e=>{if(clearTimeout(t),e.exists()){const t=e.data();a(t)}else console.warn("Stats document doesn't exist. Please ensure write operations update aggregates."),a({monthTotal:0,yearTotal:0,founderStats:{},activeCount:0});o(!1)},e=>{console.error("Stats snapshot error:",e),o(!1)});return()=>{r(),clearTimeout(t)}},[e]),{stats:t,loading:s}},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const[a,i]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{if(!e&&!t)return i([]),void d(!1);const a=(0,n.P)(o(),(0,n.My)("startTime","desc"),(0,n.AB)(100)),r=(0,n.aQ)(a,e=>{const t=e.docs.map(e=>{var t,a;return(0,s.A)((0,s.A)({id:e.id},e.data({serverTimestamps:"estimate"})),{},{startTime:null===(t=e.data({serverTimestamps:"estimate"}).startTime)||void 0===t?void 0:t.toDate(),endTime:null===(a=e.data({serverTimestamps:"estimate"}).endTime)||void 0===a?void 0:a.toDate()})});i(t),d(!1)},e=>{console.error("Timesheets snapshot error:",e),d(!1)});return()=>r()},[e]),{entries:a,loading:l}}},190(e,t,a){a.d(t,{A:()=>s});const s=(0,a(784).A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},234(e,t,a){a.d(t,{Dashboard:()=>D});var s=a(43),r=a(667),n=a(791),i=a(21),l=a(11),o=a(88),d=a(784);const c=(0,d.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var m=a(190),u=a(579);const h=e=>{let{stats:t,loading:a,foundersList:s=[],usersData:r=[],showBreakdown:n=!1}=e;const i=e=>{if(!e)return"0h 0m";const t=Math.floor(e/36e5),a=Math.floor(e%36e5/6e4);return"".concat(t,"h ").concat(a,"m")},l=e=>e?e.split(" ").map(e=>e[0]).join("").substring(0,2):"??";return a?(0,u.jsxs)(u.Fragment,{children:[[1,2,3].map(e=>(0,u.jsx)("div",{className:"card stat-card shimmer",style:{height:"160px"}},e)),n&&(0,u.jsx)("div",{className:"card breakdown-card shimmer",style:{height:"300px"}})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"card stat-card",children:[(0,u.jsx)("div",{className:"stat-icon-wrapper blue",children:(0,u.jsx)(o.A,{size:24})}),(0,u.jsx)("div",{className:"stat-label",children:"Total Hours (Month)"}),(0,u.jsx)("div",{className:"stat-value",children:i(t.monthTotal)}),(0,u.jsx)("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"4px",background:"var(--primary)"}})]}),(0,u.jsxs)("div",{className:"card stat-card",children:[(0,u.jsx)("div",{className:"stat-icon-wrapper green",children:(0,u.jsx)(c,{size:24})}),(0,u.jsx)("div",{className:"stat-label",children:"Total Hours (Year)"}),(0,u.jsx)("div",{className:"stat-value",children:i(t.yearTotal)}),(0,u.jsx)("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"4px",background:"#10b981"}})]}),(0,u.jsxs)("div",{className:"card stat-card",children:[(0,u.jsx)("div",{className:"stat-icon-wrapper purple",children:(0,u.jsx)(m.A,{size:24})}),(0,u.jsx)("div",{className:"stat-label",children:"Active Sessions"}),(0,u.jsx)("div",{className:"stat-value",children:t.activeCount||0}),(0,u.jsx)("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:"4px",background:"#7209b7"}})]}),n&&(0,u.jsx)("div",{className:"card breakdown-card",style:{gridColumn:"span 12",marginTop:"1rem"},children:(()=>{const e=r.filter(e=>"founder"===e.role),a=r.filter(e=>"employee"===e.role||!e.role),s=(e,a)=>(0,u.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,u.jsx)("h3",{style:{fontSize:"1.1rem",marginBottom:"1rem",color:"#475569",borderBottom:"2px solid var(--primary-light)",paddingBottom:"0.5rem",display:"inline-block"},children:e}),(0,u.jsx)("div",{style:{overflowX:"auto"},children:(0,u.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.95rem"},children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{style:{borderBottom:"2px solid #e2e8f0",textAlign:"left"},children:[(0,u.jsx)("th",{style:{padding:"0.75rem",color:"#64748b"},children:"Name"}),(0,u.jsx)("th",{style:{padding:"0.75rem",color:"#3b82f6"},children:"Hours (Month)"}),(0,u.jsx)("th",{style:{padding:"0.75rem",color:"#10b981"},children:"Hours (Year)"})]})}),(0,u.jsxs)("tbody",{children:[a.map(e=>{const a=e.name||e,s=t.founderStats&&t.founderStats[a]||{},r=s.month||0,n=s.year||0;return(0,u.jsxs)("tr",{style:{borderBottom:"1px solid #f1f5f9"},children:[(0,u.jsx)("td",{style:{padding:"0.75rem",fontWeight:500},children:(0,u.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,u.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"#f1f5f9",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",color:"#64748b"},children:l(a)}),a]})}),(0,u.jsx)("td",{style:{padding:"0.75rem",fontFamily:"monospace",color:"#3b82f6"},children:i(r)}),(0,u.jsx)("td",{style:{padding:"0.75rem",fontFamily:"monospace",color:"#10b981"},children:i(n)})]},a)}),0===a.length&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:"3",style:{padding:"1rem",color:"var(--text-muted)",textAlign:"center"},children:"No users found in this category"})})]})]})})]});return(0,u.jsxs)("div",{children:[s("Founders",e),s("Employees",a)]})})()})]})},p=(0,d.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),g=(0,d.A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),x=(0,d.A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),y=(0,s.memo)(e=>{let{activeEntry:t,activeLoading:a,onClockIn:r,onClockOut:n,onManualSubmit:i}=e;const[l,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[m,h]=(0,s.useState)(!1),[y,f]=(0,s.useState)((new Date).toISOString().split("T")[0]),[v,j]=(0,s.useState)("09:00"),[b,T]=(0,s.useState)("17:00"),[k,S]=(0,s.useState)(""),[N,w]=(0,s.useState)("");return(0,u.jsx)("div",{className:"timer-section card animate-slide-up delay-200",children:(0,u.jsxs)("div",{style:{padding:"2rem"},children:[(0,u.jsxs)("div",{className:"timer-header",children:[(0,u.jsx)("h2",{style:{margin:0,fontSize:"1.25rem"},children:m?"Log Past Work":"Current Session"}),(0,u.jsx)("button",{onClick:()=>h(!m),className:"mode-switch-btn",children:m?"Switch to Timer":"Switch to Manual Entry"})]}),m?(0,u.jsxs)("form",{onSubmit:e=>{e.preventDefault();i("Others"===k?N:k,y,v,b),h(!1),S(""),w("")},style:{display:"grid",gap:"1.5rem"},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"input-label",children:"Task Description"}),(0,u.jsx)("input",{type:"text",list:"task-suggestions",value:k,onChange:e=>S(e.target.value),placeholder:"e.g., Q3 Financial Review",className:"task-input"}),"Others"===k&&(0,u.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),placeholder:"Specify task...",className:"task-input",style:{marginTop:"0.5rem"},autoFocus:!0})]}),(0,u.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"input-label",children:"Date"}),(0,u.jsx)("input",{type:"date",value:y,onChange:e=>f(e.target.value),className:"custom-input"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"input-label",children:"Start"}),(0,u.jsx)("input",{type:"time",value:v,onChange:e=>j(e.target.value),className:"custom-input"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"input-label",children:"End"}),(0,u.jsx)("input",{type:"time",value:b,onChange:e=>T(e.target.value),className:"custom-input"})]})]}),(0,u.jsxs)("button",{type:"submit",className:"action-btn btn-primary",children:[(0,u.jsx)(p,{size:20})," Log Entry"]})]}):(0,u.jsxs)("div",{className:"timer-controls",children:[(0,u.jsx)("div",{style:{flex:1},children:t?(0,u.jsxs)("div",{className:"active-session-card",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("div",{style:{fontSize:"0.8rem",textTransform:"uppercase",color:"var(--primary)",fontWeight:700,marginBottom:"0.25rem"},children:"Active Task"}),(0,u.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:600},children:t.task}),(0,u.jsxs)("div",{style:{fontSize:"0.9rem",color:"var(--text-muted)"},children:["Started at ",t.startTime?t.startTime.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Unknown"]})]}),(0,u.jsx)("div",{className:"btn-pulse",style:{width:"12px",height:"12px",background:"#10b981",borderRadius:"50%"}})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("input",{type:"text",list:"task-suggestions",value:l,onChange:e=>o(e.target.value),placeholder:"What are you working on?",className:"task-input"}),"Others"===l&&(0,u.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Specify task...",className:"task-input",style:{marginTop:"0.75rem"},autoFocus:!0})]})}),t?(0,u.jsxs)("button",{onClick:n,className:"action-btn btn-danger",children:[(0,u.jsx)(g,{size:20,fill:"currentColor"})," Stop"]}):(0,u.jsxs)("button",{onClick:()=>{r("Others"===l?d:l),o(""),c("")},disabled:a&&!t&&!1,className:"action-btn btn-primary",children:[(0,u.jsx)(x,{size:20,fill:"currentColor"})," Start"]})]})]})})});var f=a(978),v=a(855),j=a(505),b=a(829),T=a(217);const k=(0,s.memo)(e=>{let{entries:t,loading:a,onDelete:s,onEdit:r}=e;return(0,u.jsxs)("div",{className:"card history-section animate-slide-up delay-300",children:[(0,u.jsxs)("h3",{style:{fontSize:"1.1rem",margin:"0 0 1.5rem 0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,u.jsx)(f.A,{size:20})," Recent Activity (Last 10)"]}),0===t.length?(0,u.jsx)("div",{style:{padding:"3rem",textAlign:"center",color:"var(--text-muted)"},children:a?"Checking history...":"No activities recorded yet."}):(0,u.jsx)("ul",{className:"history-list",children:t.map(e=>{const t=e.startTime,a=e.endTime;let n="Active";a&&t&&(n=(0,b.a3)(a-t));const i=(0,b.IM)(e.founder),l=T.$h.indexOf(e.founder)%4,o=["#4361ee","#7209b7","#f72585","#4cc9f0"],d=o[Math.max(0,l)]||o[0];return(0,u.jsxs)("li",{className:"history-item",children:[(0,u.jsx)("div",{className:"history-avatar",style:{background:"".concat(d,"20"),color:d},children:i}),(0,u.jsxs)("div",{className:"history-content",children:[(0,u.jsx)("div",{className:"history-task",children:e.task}),(0,u.jsxs)("div",{className:"history-meta",children:[(0,u.jsx)("span",{children:e.founder}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsx)("span",{children:t?(0,b.Yq)(t):"Unknown Date"}),(0,u.jsx)("span",{children:"\u2022"}),(0,u.jsxs)("span",{children:[t?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"--:--"," -",a?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Now"]})]})]}),(0,u.jsx)("span",{className:"history-duration",style:a?{}:{color:"#10b981",background:"#d1fae5"},children:n}),(0,u.jsx)("button",{onClick:()=>s(e.id),className:"history-delete-btn",title:"Delete",children:(0,u.jsx)(v.A,{size:16})}),(0,u.jsx)("button",{onClick:()=>r(e),className:"history-edit-btn",title:"Edit",children:(0,u.jsx)(j.A,{size:16})})]},e.id)})})]})});var S=a(555);const N=s.memo(e=>{let{foundersList:t=[],isReadOnly:a}=e;const[i,l]=(0,s.useState)((new Date).toISOString().split("T")[0]),[o,d]=(0,s.useState)({}),[c,m]=(0,s.useState)({}),[h,p]=(0,s.useState)(!0),[g,x]=(0,s.useState)(!1),[y,f]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1),[b,k]=(0,s.useState)({founderStats:{},yearlyTotal:0,totalMeetings:0});(0,s.useEffect)(()=>{let e=!1;x(!0),j(!1);const a=t.reduce((e,t)=>(0,S.A)((0,S.A)({},e),{},{[t]:!1}),{});return t.length>0?(async()=>{try{const s=(0,r.H9)(n.db,"artifacts",T.sZ,"public","data","meeting_attendance",i),l=await(0,r.x7)(s);if(e)return;if(l.exists()){const e=l.data().attendance||{},s=(0,S.A)((0,S.A)({},a),e),r={};t.forEach(e=>{r[e]=s[e]||!1}),d(r),m(r),p(!1)}else d(a),m(a),p(!0)}catch(s){console.error("Error fetching attendance:",s)}finally{e||x(!1)}})():x(!1),()=>{e=!0}},[i,t]),(0,s.useEffect)(()=>{const e=(0,r.H9)(n.db,"artifacts",T.sZ,"public","data","stats","aggregate"),t=(0,r.aQ)(e,e=>{if(e.exists()){const t=e.data();t.meetingStats&&k(t.meetingStats)}});return()=>t()},[]);return(0,u.jsxs)("div",{className:"card meeting-attendance-card",style:{gridColumn:"span 12"},children:[(0,u.jsxs)("div",{className:"timer-header",children:[(0,u.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:700,margin:0},children:"Founders Weekly Meeting"}),!a&&(0,u.jsx)("input",{type:"date",value:i,onChange:e=>l(e.target.value),className:"custom-input",style:{padding:"0.5rem",width:"auto"}})]}),(0,u.jsxs)("div",{style:{display:"grid",gridTemplateColumns:a?"1fr":"1fr 1fr",gap:"2rem",marginTop:"1.5rem"},children:[!a&&(0,u.jsxs)("div",{style:{background:"#f8f9fa",padding:"1.5rem",borderRadius:"12px"},children:[(0,u.jsxs)("h3",{style:{marginTop:0},children:["Mark Attendance ",h&&(0,u.jsx)("span",{style:{fontSize:"0.8rem"},children:"(New)"})]}),g?(0,u.jsx)("div",{children:"Loading..."}):(0,u.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:t.map(e=>(0,u.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"1rem",padding:"0.75rem",background:o[e]?"rgba(16, 185, 129, 0.1)":"white",borderRadius:"8px",border:"1px solid var(--border-color)"},children:[(0,u.jsx)("input",{type:"checkbox",checked:o[e]||!1,onChange:()=>(e=>{d(t=>(0,S.A)((0,S.A)({},t),{},{[e]:!t[e]}))})(e)}),(0,u.jsx)("span",{children:e})]},e))}),(0,u.jsx)("button",{onClick:async()=>{f(!0),j(!1);try{const e=(0,r.H9)(n.db,"artifacts",T.sZ,"public","data","stats","aggregate"),t=(new Date).getFullYear(),a=new Date(i).getFullYear()===t,s={};h&&(s.totalMeetings=(0,r.GV)(1),a&&(s.yearlyTotal=(0,r.GV)(1)));const l={};let d=!1;Object.keys(o).forEach(e=>{const t=!h&&(c[e]||!1),a=o[e]||!1;a&&!t?(l[e]=(0,r.GV)(1),d=!0):!a&&t&&(l[e]=(0,r.GV)(-1),d=!0)}),d&&(s.founderStats=l);const u={meetingStats:s},g=Object.keys(s).length>0;await Promise.all([(0,r.BN)((0,r.H9)(n.db,"artifacts",T.sZ,"public","data","meeting_attendance",i),{date:i,attendance:o,updatedAt:(new Date).toISOString()},{merge:!0}),g?(0,r.BN)(e,u,{merge:!0}):Promise.resolve()]),m((0,S.A)({},o)),p(!1),j(!0),setTimeout(()=>j(!1),3e3)}catch(e){console.error("Error saving attendance:",e),alert("Failed. Try again.")}finally{f(!1)}},disabled:y,style:{marginTop:"1rem",width:"100%",padding:"1rem",borderRadius:"8px",border:"none",background:"var(--primary)",color:"white"},children:y?"Saving...":"Save Attendance"})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h3",{children:"Attendance Overview"}),(0,u.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},children:[(0,u.jsxs)("div",{style:{background:"#f1f5f9",padding:"1rem",borderRadius:"8px"},children:[(0,u.jsx)("div",{children:"Total (Year)"}),(0,u.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:b.yearlyTotal})]}),(0,u.jsxs)("div",{style:{background:"#f1f5f9",padding:"1rem",borderRadius:"8px"},children:[(0,u.jsx)("div",{children:"Total (All Time)"}),(0,u.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:b.totalMeetings})]})]}),(0,u.jsx)("table",{style:{width:"100%"},children:(0,u.jsx)("tbody",{children:t.map(e=>{var t;const a=(null===(t=b.founderStats)||void 0===t?void 0:t[e])||0,s=b.totalMeetings||1,r=Math.round(a/s*100);return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{children:e}),(0,u.jsxs)("td",{style:{textAlign:"right"},children:[a," (",r,"%)"]})]},e)})})})]})]})]})});var w=a(380);const D=e=>{let{user:t,forcedFounder:a,isReadOnly:o}=e;const[d,c]=(0,s.useState)([]),[m,p]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{if(a)c([a]),p([{name:a,role:"employee"}]);else try{const e=(0,r.P)((0,r.rJ)(n.db,"artifacts",T.sZ,"users")),t=(await(0,r.GG)(e)).docs.map(e=>({name:e.data().fullName,role:e.data().role||"employee"})).filter(e=>e.name);t.length>0?(c(t.map(e=>e.name)),p(t)):(c([]),p([]))}catch(e){console.error("Error fetching founders:",e),c([]),p([])}})()},[a]);const[g,x]=(0,s.useState)(a||d[0]||T.$h&&T.$h[0]||"Founder"),[f,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{a?x(a):d.length>0&&!d.includes(g)&&x(d[0])},[a,d]);const{activeEntry:j,loading:b}=(0,i.Ek)(t,g),{entries:S,loading:D}=(0,i.LF)(t,5),{stats:C,loading:A}=(0,i.J3)(t),M=async(e,t,a)=>{try{const s=(0,r.H9)(n.db,"artifacts",T.sZ,"public","data","stats","aggregate"),i=new Date,l=a||i,o=l.getMonth()===i.getMonth()&&l.getFullYear()===i.getFullYear(),d=l.getFullYear()===i.getFullYear(),c={year:(0,r.GV)(t)};o&&(c.month=(0,r.GV)(t));const m={founderStats:{[e]:c}};d&&(m.yearTotal=(0,r.GV)(t)),o&&(m.monthTotal=(0,r.GV)(t)),await(0,r.BN)(s,m,{merge:!0})}catch(s){console.error("Failed to update stats:",s)}},E=async e=>{try{const t=(0,r.H9)(n.db,"artifacts",T.sZ,"public","data","stats","aggregate");await(0,r.BN)(t,{activeCount:(0,r.GV)(e)},{merge:!0})}catch(t){console.error("Failed to update active count:",t)}},L=(0,s.useCallback)(async e=>{if(t&&e.trim())try{await(0,r.gS)((0,r.rJ)(n.db,"artifacts",T.sZ,"public","data",T.LL),{founder:g,task:e,startTime:(0,r.O5)(),endTime:null,status:"active"}),await E(1)}catch(a){console.error("Error clocking in:",a),alert("Failed to clock in.")}},[t,g]),F=(0,s.useCallback)(async()=>{if(t&&j)try{const e=new Date,t=j.startTime,a=e.getTime()-t.getTime(),s=(0,r.H9)(n.db,"artifacts",T.sZ,"public","data",T.LL,j.id);await(0,r.mZ)(s,{endTime:r.Dc.fromDate(e),status:"completed"}),await M(j.founder,a,e),await E(-1)}catch(e){console.error("Error clocking out:",e)}},[t,j]),z=(0,s.useCallback)(async(e,a,s,i)=>{if(!t||!e.trim())return;const l=new Date("".concat(a,"T").concat(s)),o=new Date("".concat(a,"T").concat(i));if(o<=l)return void alert("End time must be after start time");const d=o.getTime()-l.getTime();try{await(0,r.gS)((0,r.rJ)(n.db,"artifacts",T.sZ,"public","data",T.LL),{founder:g,task:e,startTime:r.Dc.fromDate(l),endTime:r.Dc.fromDate(o),status:"manual"}),await M(g,d,l)}catch(c){console.error("Error adding manual entry:",c)}},[t,g]),I=(0,s.useCallback)(async e=>{if(window.confirm("Are you sure you want to delete this entry?"))try{const t=(0,r.H9)(n.db,"artifacts",T.sZ,"public","data",T.LL,e),a=await(0,r.x7)(t);if(a.exists()){const e=a.data();if(e.endTime&&"active"!==e.status){if(e.endTime&&e.startTime){const t=e.startTime.toDate?e.startTime.toDate():new Date(e.startTime),a=(e.endTime.toDate?e.endTime.toDate():new Date(e.endTime)).getTime()-t.getTime();await M(e.founder,-a,t)}}else await E(-1)}await(0,r.kd)(t)}catch(t){console.error("Error deleting:",t)}},[]),O=a&&C.founderStats&&C.founderStats[a]?{monthTotal:C.founderStats[a].month||0,yearTotal:C.founderStats[a].year||0,activeCount:j?1:0,founderStats:C.founderStats,founderStats:{[a]:C.founderStats[a]},meetingStats:C.meetingStats}:C;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("datalist",{id:"task-suggestions",children:T.Ct.map(e=>(0,u.jsx)("option",{value:e},e))}),(0,u.jsx)(l.V,{selectedFounder:g,setSelectedFounder:a||o?void 0:x,title:a&&"string"===typeof a?"Welcome, ".concat(a.split(" ")[0]):"Admin Dashboard",foundersList:d}),(0,u.jsxs)("div",{className:"dashboard-grid",children:[(0,u.jsx)(h,{stats:O,loading:A,foundersList:d,usersData:m,showBreakdown:!!o}),!o&&(0,u.jsx)(y,{activeEntry:j,activeLoading:b,onClockIn:L,onClockOut:F,onManualSubmit:z}),(0,u.jsx)(N,{foundersList:d,isReadOnly:o}),(0,u.jsx)(k,{entries:S,loading:D,onDelete:I,onEdit:v})]}),(0,u.jsx)(w.E,{entry:f,onSave:async e=>{try{const t=f;if(!t)return;const a=(0,r.H9)(n.db,"artifacts",T.sZ,"public","data",T.LL,e.id),s=t.startTime.toDate?t.startTime.toDate():new Date(t.startTime),i=t.endTime?t.endTime.toDate?t.endTime.toDate():new Date(t.endTime):null;if(i){const e=i.getTime()-s.getTime();await M(t.founder,-e,s)}const l=e.endTime.getTime()-e.startTime.getTime();await M(e.founder,l,e.startTime),await(0,r.mZ)(a,{task:e.task,startTime:r.Dc.fromDate(e.startTime),endTime:r.Dc.fromDate(e.endTime)}),v(null)}catch(t){console.error("Error updating entry:",t),alert("Failed to update entry")}},onCancel:()=>v(null)})]})}},380(e,t,a){a.d(t,{E:()=>l});var s=a(555),r=a(43);const n=(0,a(784).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var i=a(579);const l=e=>{let{entry:t,onSave:a,onCancel:l}=e;const[o,d]=(0,r.useState)(""),[c,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[p,g]=(0,r.useState)("");(0,r.useEffect)(()=>{if(t){d(t.task);const e=t.startTime&&t.startTime.toDate?t.startTime.toDate():new Date(t.startTime),a=t.endTime&&t.endTime.toDate?t.endTime.toDate():new Date(t.endTime);e&&(m(e.toTimeString().slice(0,5)),g(e.toISOString().split("T")[0])),a&&h(a.toTimeString().slice(0,5))}},[t]);return t?(0,i.jsx)("div",{className:"modal-overlay",onClick:l,children:(0,i.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{className:"modal-header",children:[(0,i.jsx)("h3",{className:"modal-title",children:"Edit Entry"}),(0,i.jsx)("button",{className:"mode-switch-btn",onClick:l,style:{padding:"0.25rem"},children:(0,i.jsx)(n,{size:20})})]}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault();const r=new Date("".concat(p,"T").concat(c)),n=new Date("".concat(p,"T").concat(u));n<=r?alert("End time must be after start time"):a((0,s.A)((0,s.A)({},t),{},{task:o,startTime:r,endTime:n}))},children:[(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{className:"input-label",children:"Task Description"}),(0,i.jsx)("input",{type:"text",className:"custom-input",value:o,onChange:e=>d(e.target.value),required:!0})]}),(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{className:"input-label",children:"Date"}),(0,i.jsx)("input",{type:"date",className:"custom-input",value:p,onChange:e=>g(e.target.value),required:!0})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{className:"input-label",children:"Start Time"}),(0,i.jsx)("input",{type:"time",className:"custom-input",value:c,onChange:e=>m(e.target.value),required:!0})]}),(0,i.jsxs)("div",{className:"input-group",children:[(0,i.jsx)("label",{className:"input-label",children:"End Time"}),(0,i.jsx)("input",{type:"time",className:"custom-input",value:u,onChange:e=>h(e.target.value),required:!0})]})]}),(0,i.jsxs)("div",{className:"modal-actions",children:[(0,i.jsx)("button",{type:"button",className:"action-btn",onClick:l,style:{padding:"0.75rem 1.5rem",background:"#f1f5f9",color:"#64748b"},children:"Cancel"}),(0,i.jsx)("button",{type:"submit",className:"action-btn btn-primary",style:{padding:"0.75rem 1.5rem"},children:"Save Changes"})]})]})]})}):null}},505(e,t,a){a.d(t,{A:()=>s});const s=(0,a(784).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},829(e,t,a){a.d(t,{IM:()=>n,Yq:()=>r,a3:()=>s});const s=e=>{if(!e&&0!==e)return"0h 0m";const t=Math.floor(e/6e4);if(0===t)return"< 1m";const a=Math.floor(t/60),s=t%60;return"".concat(a,"h ").concat(s,"m")},r=e=>e?new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(e):"",n=e=>e?e.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase():"?"},855(e,t,a){a.d(t,{A:()=>s});const s=(0,a(784).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}}]);
//# sourceMappingURL=234.598604fe.chunk.js.map